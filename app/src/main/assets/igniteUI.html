<html>
	<head>
		<title>pixi.js example 2 loading a sprite sheet</title>
		<style>
			body {
				margin: 0;
				padding: 0;
				background-color: transparent;
			}
		</style>
		<script src="scripts/pixi.js"></script>
		<script src="scripts/HashTable.js"></script>
		<script src="scripts/DataDefinition.js"></script>
		<script src="scripts/igniteUI-core.js"></script>
	</head>
	<body>		
		<script>
			//window.addEventListener('resize', resize, false);
			var innerWidth = window.innerWidth,
				innerHeight = window.innerHeight;

			console.log("innerWidth: "+innerWidth);
			console.log("innerHeight: "+innerHeight);

			var tabs = [];

			var resources = PIXI.loader.resources;

			var ratio = 1;

            if(innerHeight > innerWidth) { 
                ratio = innerWidth/640;
            }    
            else {
            	ratio = innerHeight/960;
            }

            console.log("innerWidth: "+innerWidth);
			console.log("innerHeight: "+innerHeight);
			console.log("ratio: "+ratio);

			var stage = new PIXI.Container();
			stage.position = new PIXI.Point(innerWidth/2,innerHeight/2);
			stage.width = innerWidth;
			stage.height = innerHeight;
			stage.anchor = new PIXI.Point(0.5,0.5);
			stage.scale = new PIXI.Point(ratio,ratio);
			
			var options = {transparent:true};

			var renderer = PIXI.autoDetectRenderer(innerWidth, innerHeight,options,true);

			document.body.appendChild(renderer.view);

			var loader = PIXI.loader
				.add('buttonSlice','images/buttonSlice.png')
				.add('popUpSlice','images/popUpSlice.png')
				.load( function (loader, resources) {
				})
				.once('complete',onAssetsLoaded);

			function onAssetsLoaded() {

				//Left Containers			
				var TopLeftContainer = new PIXI.Container();
				TopLeftContainer.position = new PIXI.Point(-innerWidth/(2*ratio),-innerHeight/(2*ratio));
				TopLeftContainer.anchor = new PIXI.Point(0,0);
				stage.addChild(TopLeftContainer);
				
				var MiddleLeftContainer = new PIXI.Container();
				MiddleLeftContainer.position = new PIXI.Point(-innerWidth/(2*ratio),0);
				MiddleLeftContainer.anchor = new PIXI.Point(0.5,0.5);
				stage.addChild(MiddleLeftContainer);

				var BottomLeftContainer = new PIXI.Container();
				BottomLeftContainer.position = new PIXI.Point(-innerWidth/(2*ratio),innerHeight/(2*ratio));
				BottomLeftContainer.anchor = new PIXI.Point(0.5,0.5);
				stage.addChild(BottomLeftContainer);

				//Center Containers
				var TopCenterContainer = new PIXI.Container();
				TopCenterContainer.position = new PIXI.Point(0,-innerHeight/(2*ratio));
				TopCenterContainer.anchor = new PIXI.Point(0.5,0.5);
				stage.addChild(TopCenterContainer);

				var MiddleCenterContainer = new PIXI.Container();
				MiddleCenterContainer.position = new PIXI.Point(0,0);
				MiddleCenterContainer.anchor = new PIXI.Point(0.5,0.5);
				stage.addChild(MiddleCenterContainer);

				var BottomCenterContainer = new PIXI.Container();
				BottomCenterContainer.position = new PIXI.Point(0,innerHeight/(2*ratio));
				BottomCenterContainer.anchor = new PIXI.Point(0.5,0.5);
				stage.addChild(BottomCenterContainer);

				//Right Containers
				var TopRightContainer = new PIXI.Container();
				TopRightContainer.position = new PIXI.Point(innerWidth/(2*ratio),-innerHeight/(2*ratio));
				TopRightContainer.anchor = new PIXI.Point(0.5,0.5);
				stage.addChild(TopRightContainer);

				var MiddleRightContainer = new PIXI.Container();
				MiddleRightContainer.position = new PIXI.Point(innerWidth/(2*ratio),0);
				MiddleRightContainer.anchor = new PIXI.Point(0.5,0.5);
				stage.addChild(MiddleRightContainer);

				var BottomRightContainer = new PIXI.Container();
				BottomRightContainer.position = new PIXI.Point(innerWidth/(2*ratio),innerHeight/(2*ratio));
				BottomRightContainer.anchor = new PIXI.Point(0.5,0.5);
				stage.addChild(BottomRightContainer);
				
				var missionTab1 = new TabUIController( 1 , TabPosition.one , TabType.mission , OpenCloseTabCallback );
				MiddleLeftContainer.addChild( missionTab1.CreateUI() );
				tabs.push(missionTab1);

				var missionTab2 = new TabUIController( 2 , TabPosition.two , TabType.mission , OpenCloseTabCallback );
				MiddleLeftContainer.addChild( missionTab2.CreateUI() );
				tabs.push(missionTab2);

				var missionTab3 = new TabUIController( 3 , TabPosition.three , TabType.mission , OpenCloseTabCallback );
				MiddleLeftContainer.addChild( missionTab3.CreateUI() );
				tabs.push(missionTab3);

				var missionTab4 = new TabUIController( 4 , TabPosition.four , TabType.mission , OpenCloseTabCallback );
				MiddleLeftContainer.addChild( missionTab4.CreateUI() );
				tabs.push(missionTab4);
				
				var leaderBoardTab1 = new TabUIController( 5 , TabPosition.one , TabType.leaderBoard , OpenCloseTabCallback );
				MiddleRightContainer.addChild( leaderBoardTab1.CreateUI() );
				tabs.push(leaderBoardTab1);

				var leaderBoardTab2 = new TabUIController( 6 , TabPosition.two , TabType.leaderBoard , OpenCloseTabCallback );
				MiddleRightContainer.addChild( leaderBoardTab2.CreateUI() );
				tabs.push(leaderBoardTab2);

				var leaderBoardTab3 = new TabUIController( 7 , TabPosition.three , TabType.leaderBoard , OpenCloseTabCallback );
				MiddleRightContainer.addChild( leaderBoardTab3.CreateUI() );
				tabs.push(leaderBoardTab3);
				
				var leaderBoardTab4 = new TabUIController( 8 , TabPosition.four , TabType.leaderBoard , OpenCloseTabCallback );
				MiddleRightContainer.addChild( leaderBoardTab4.CreateUI() );
				tabs.push(leaderBoardTab4);

				renderer.render(stage); 	
				
			}

			function OpenCloseTabCallback(index,open) {
				for( var i=0; i<tabs.length ; i++ ) {
					if( tabs[i].index != index ) {
						tabs[i].container.visible = !open;
					}
				}
				renderer.render(stage);
			}

			function objToString (obj) {
    			var str = '';
    			for (var p in obj) {
        			if (obj.hasOwnProperty(p)) {
            			str += p + '::' + obj[p] + '\n';
        			}
    			}
    			return str;
			}

		</script>
	</body>
</html>